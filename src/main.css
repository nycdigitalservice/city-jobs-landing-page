@import "../packages/css-reset/reset.css";
@import "../packages/components/card/card.css";

@custom-selector :--heading h1, h2, h3, h4, h5, h6;

:root {
  --nyc-ref-color-blue-100: hsla(213, 53%, 50%, 1);
  --nyc-ref-color-blue-200: hsla(213, 59%, 45%, 1);
  --nyc-ref-color-blue-400: hsla(209, 100%, 42%, 1);
  --nyc-ref-color-blue-500: hsla(208, 100%, 30%, 1);
  --nyc-ref-color-blue-600: hsla(212, 75%, 28%, 1);
  --nyc-ref-color-blue-50: hsla(214, 54%, 95%, 1);
  --nyc-ref-color-orange-500: hsla(26, 92%, 58%, 1);
  --nyc-ref-color-orange-700: hsla(25, 78%, 41%, 1);
  --nyc-ref-color-purple-525: hsla(271, 61%, 35%, 0.25);
  --nyc-ref-color-neutral-0: hsla(0, 0%, 100%, 1);
  --nyc-ref-color-neutral-100: hsla(0, 0%, 93%, 1);
  --nyc-ref-color-neutral-200: hsla(0, 0%, 80%, 1);
  --nyc-ref-color-neutral-300: hsla(0, 0%, 40%, 1);
  --nyc-ref-color-neutral-325: hsla(0, 0%, 40%, 0.25);
  --nyc-ref-color-neutral-900: hsla(0, 0%, 0%, 1);
  --nyc-ref-color-neutral-920: hsla(0, 0%, 0%, .2);
  --nyc-ref-color-neutral-925: hsla(0, 0%, 0%, .25);


  --nyc-ref-gradient-blue-1: linear-gradient(154.62deg, #008FFF 48.25%, #0D4D8B 92.24%);
  --nyc-ref-gradient-blue-2: linear-gradient(150.06deg, #008FFF -11.53%, #0D4D8B 16.58%, #01194E 53.58%, #000B23 73.72%);

  --nyc-ref-shadow-200: 0px 4px 4px 0px var(--nyc-ref-color-neutral-325);
  --nyc-ref-shadow-300: 0px 4px 4px 0px var(--nyc-ref-color-purple-525);
  --nyc-ref-shadow-400: 4px 4px 8px var(--nyc-ref-color-neutral-920);
  --nyc-ref-shadow-450: 0 4px 8px var(--nyc-ref-color-neutral-920);
  --nyc-ref-shadow-500: 0 4px 4px var(--nyc-ref-color-neutral-925);

  --nyc-sys-color-primary: var(--nyc-ref-color-blue-400);
  --nyc-sys-color-on-primary: var(--nyc-ref-color-neutral-0);
  --nyc-sys-color-primary-dark: var(--nyc-ref-color-blue-500);
  --nyc-sys-color-primary-darker: var(--nyc-ref-color-blue-600);
  --nyc-sys-color-secondary: var(--nyc-ref-color-neutral-100);
  --nyc-sys-color-secondary-dark: var(--nyc-ref-color-neutral-200);
  --nyc-sys-color-on-secondary-dark: var(--nyc-ref-color-neutral-0);
  --nyc-sys-color-tertiary: var(--nyc-ref-color-neutral-900);
  --nyc-sys-color-on-tertiary: var(--nyc-ref-color-neutral-0);
  --nyc-sys-color-text: var(--nyc-ref-color-neutral-900);
  --nyc-sys-color-text-weak: var(--nyc-ref-color-neutral-300);
  --nyc-sys-color-background: var(--nyc-ref-color-neutral-0);
  --nyc-sys-color-border: var(--nyc-ref-color-neutral-200);
  --nyc-sys-gradient-primary: var(--nyc-ref-gradient-blue-1);
  --nyc-sys-gradient-primary-dark: var(--nyc-ref-gradient-blue-2);
  --nyc-sys-shadow-primary: var(--nyc-ref-shadow-300);
  --nyc-sys-shadow-base: var(--nyc-ref-shadow-500);
  --nyc-sys-shadow-weak: var(--nyc-ref-shadow-400);
  --nyc-sys-font-size-base: var(--size-step-0);
  --nyc-sys-font-family-base: "Helvetica Neue", Helvetica, Arial, sans-serif;

  --nyc-cmp-button-color: var(--nyc-sys-color-text, currentColor);
  --nyc-cmp-button-color-disabled: var(--nyc-sys-color-on-secondary-dark, currentColor);
  --nyc-cmp-button-background: var(--nyc-sys-color-background, transparent);
  --nyc-cmp-button-background-disabled: var(--nyc-sys-color-secondary-dark, transparent);
  --nyc-cmp-button-shadow: var(--nyc-sys-shadow-base);
  --nyc-cmp-button-border: 2px solid var(--nyc-sys-color-border);

  --nyc-cmp-input-background: var(--nyc-sys-color-background);
  --nyc-cmp-input-color: var(--nyc-sys-color-text-weak);
  --nyc-cmp-input-border: 1px solid var(--nyc-sys-color-border);
  --nyc-cmp-input-border: 1px solid var(--nyc-sys-color-border);
  --nyc-cmp-input-font: 400 1rem /3.25 var(--nyc-sys-font-family-base);

  --nyc-cmp-card-background: var(--nyc-sys-gradient-primary, transparent);
  --nyc-cmp-card-background-hover: var(--nyc-sys-gradient-primary-dark, transparent);
  --nyc-cmp-card-color: var(--nyc-sys-color-on-primary);
  --nyc-cmp-card-shadow: var(--nyc-sys-shadow-base);

  --nyc-dimension-page-max-width: 1204px;

  --measure: 75ch;
  /* page-max-width: 1170px */
  --page-max-width: 73.125rem;
  --gutter: var(--size-step-0);

/* @link https://utopia.fyi/type/calculator?c=320,18,1.2,1170,24,1.25,5,2,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 */

  /* Step -2: 12.50px → 15.36px */
  --size-step--2: clamp(0.78rem, calc(0.71rem + 0.34vw), 0.96rem);

  /* /\* Step -1: 15.00px → 19.20px *\/ */
  /* --size-step--1: clamp(0.94rem, calc(0.84rem + 0.49vw), 1.20rem); */

  /* Step -1: 16.00px → 20px */
  --size-step--1: clamp(1rem, calc(0.84rem + 0.49vw), 1.25rem);

  /* Step 0: 18.00px → 24.00px */
  --size-step-0: clamp(1.13rem, calc(0.98rem + 0.71vw), 1.50rem);
  --size-step-05: clamp(1.13rem, calc(0.98rem + 0.71vw), 1.375rem);

  /* Step 1: 21.60px → 30.00px */
  --size-step-1: clamp(1.35rem, calc(1.15rem + 0.99vw), 1.88rem);

  /* Step 2: 25.92px → 37.50px */
  --size-step-2: clamp(1.62rem, calc(1.35rem + 1.36vw), 2.34rem);

  /* Step 3: 31.10px → 46.88px */
  --size-step-3: clamp(1.94rem, calc(1.57rem + 1.86vw), 2.93rem);

  /* Step 4: 37.32px → 58.59px */
  --size-step-4: clamp(2.33rem, calc(1.83rem + 2.50vw), 3.66rem);

  /* Step 5: 44.79px → 73.24px */
  --size-step-5: clamp(2.80rem, calc(2.13rem + 3.35vw), 4.58rem);

/* @link https://utopia.fyi/space/calculator?c=320,18,1.2,1170,24,1.25,5,2,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 */

  /* Space 3xs: 5px → 6px */
  --space-3xs: clamp(0.31rem, calc(0.29rem + 0.12vw), 0.38rem);

  /* Space 2xs: 9px → 12px */
  --space-2xs: clamp(0.56rem, calc(0.49rem + 0.35vw), 0.75rem);

  /* Space xs: 14px → 18px */
  --space-xs: clamp(0.88rem, calc(0.78rem + 0.47vw), 1.13rem);

  /* Space s: 18px → 24px */
  --space-s: clamp(1.13rem, calc(0.98rem + 0.71vw), 1.50rem);

  /* Space m: 27px → 36px */
  /* --space-m: clamp(1.69rem, calc(1.48rem + 1.06vw), 2.25rem); */
  --space-m: clamp(1.5rem, calc(1.48rem + 1.06vw), 2.5rem);

  /* Space l: 36px → 48px */
  --space-l: clamp(2.25rem, calc(1.97rem + 1.41vw), 3.00rem);

  /* Space xl: 54px → 72px */
  --space-xl: clamp(3.38rem, calc(2.95rem + 2.12vw), 4.50rem);

  /* Space 2xl: 72px → 96px */
  --space-2xl: clamp(4.50rem, calc(3.94rem + 2.82vw), 6.00rem);

  /* Space 3xl: 108px → 144px */
  --space-3xl: clamp(6.75rem, calc(5.90rem + 4.24vw), 9.00rem);

  /* One-up pairs */
  /* Space 3xs-2xs: 5px → 12px */
  --space-3xs-2xs: clamp(0.31rem, calc(0.15rem + 0.82vw), 0.75rem);

  /* Space 2xs-xs: 9px → 18px */
  --space-2xs-xs: clamp(0.56rem, calc(0.35rem + 1.06vw), 1.13rem);

  /* Space xs-s: 14px → 24px */
  --space-xs-s: clamp(0.88rem, calc(0.64rem + 1.18vw), 1.50rem);

  /* Space s-m: 18px → 36px */
  --space-s-m: clamp(1.13rem, calc(0.70rem + 2.12vw), 2.25rem);

  /* Space m-l: 27px → 48px */
  --space-m-l: clamp(1.69rem, calc(1.19rem + 2.47vw), 3.00rem);

  /* Space l-xl: 36px → 72px */
  --space-l-xl: clamp(2.25rem, calc(1.40rem + 4.24vw), 4.50rem);

  /* Space xl-2xl: 54px → 96px */
  --space-xl-2xl: clamp(3.38rem, calc(2.39rem + 4.94vw), 6.00rem);

  /* Space 2xl-3xl: 72px → 144px */
  --space-2xl-3xl: clamp(4.50rem, calc(2.81rem + 8.47vw), 9.00rem);

  /* Custom pairs */
  /* Space s-l: 18px → 48px */
  --space-s-l: clamp(1.13rem, calc(0.42rem + 3.53vw), 3.00rem);

  --space: var(--space-m);
}

/* * { */
/*   max-inline-size: var(--measure); */
/* } */

/* html, */
/* body, */
div,
header,
nav,
main,
footer {
  max-inline-size: none;
}

/*
Global styles

Low-specificity, global styles that apply to the whole
project: https://cube.fyi/css.html
 */
/* body { */
:--namespace {
  color: var(--nyc-sys-color-text);
  background: var(--color-light);
  font-size: var(--nyc-sys-font-size-base);
  font-family: var(--nyc-sys-font-family-base);
  line-height: 1.4;
  letter-spacing: var(--tracking);
  margin: 0;
}

ul[role=list] {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

/* Override nyc.gov global styles */
p {
  margin: 0;
}

li {
  line-height: 1.4;
}

form {
  margin: 0;
}

input,
select {
  font-family: inherit;
  font-weight: initial;
  background-color: inherit;
  color: unset;
  font-feature-settings: inherit;
  -webkit-appearance: none;
  appearance: none;
  border-radius: 0;
  box-shadow: none;
  border: none;
  margin: 0;
  padding: 0;
  height: auto;
}

/* p, */
/* ul { */
/*   -webkit-appearance: none; */
/*   appearance: none; */
/*   box-sizing: border-box; */
/*   border: 0; */
/*   color: inherit; */
/*   margin: 0; */
/*   padding: 0 */
/* } */

/* Base typesetting */
:--heading {
  line-height: 1;
  letter-spacing: var(--tracking-s);
  color: var(--nyc-sys-color-primary);
  margin: 0;
}

h1 {
  font-size: var(--size-step-5);
}

h2 {
  font-size: var(--size-step-3);
}

h3 {
  font-size: var(--size-step-2);
}

p {
  /* max-inline-size: var(--measure); */
}

/* Base interactive elements */

button {
  appearance: none;
  border: none;
  line-height: normal;
  box-sizing: border-box;
}

a, button {
  color: currentcolor;
  text-underline-offset: .2rem;

  &:hover {
    text-decoration: none;
  }

  &[disabled] {
    pointer-events: none;
  }
}

:focus {
  outline: 2px solid;
  outline-offset: 0.3ch;
}

:target {
  scroll-margin-top: 2ex;
}

main:focus {
  outline: none;
}

[class*="i-" ] {
  display: inline-block;
}

/* Base selection styles that invert whatever colours are rendered */
::selection {
  background: var(--color-dark);
  color: var(--color-light);
}

main {
  background: var(--nyc-sys-color-background);
}

/* Inputs */
input,
select {
  font-size: inherit;
  line-height: 2.25;
  padding-inline: 1rem;
  /* height: 3rem; */
  background: var(--nyc-cmp-input-background);
  border: var(--nyc-cmp-input-border);
  border-radius: var(--nyc-cmp-input-border-radius, 0);
  color: var(--nyc-cmp-input-color);
  font: var(--nyc-cmp-input-font);
}

/* Composition */

/* AUTO GRID
Related Every Layout: https://every-layout.dev/layouts/grid/
More info on the flexible nature: https://piccalil.li/tutorial/create-a-responsive-grid-layout-with-no-media-queries-using-css-grid/
A flexible layout that will create an auto-fill grid with
configurable grid item sizes

CUSTOM PROPERTIES AND CONFIGURATION
--gutter (var(--space-s-m)): This defines the space
between each item.

--grid-min-item-size (14rem): How large each item should be
ideally, as a minimum.

--grid-placement (auto-fill): Set either auto-fit or auto-fill
to change how empty grid tracks are handled */
.grid {
  display: grid;
  gap: var(--gutter, var(--space-s-l));
}

@supports (width: min(250px, 100%)) {
  .grid {
    /* grid-template-columns: repeat(auto-fit, minmax(min(200px, 100%), 1fr)); */
    grid-template-columns: repeat(
      var(--grid-placement, auto-fill),
      minmax(var(--grid-min-item-size, 16rem), var(--grid-max-item-size, 1fr))
    );
  }
}

.grid > * {
  container: grid-item / inline-size;
}

.center {
  container: grid-parent / inline-size;
}

.grid[data-layout="1/4"] {
  --gutter: var(--space-s);
  --grid-placement: auto-fit;
  --grid-min-item-size: calc(( var(--page-max-width) - calc(var( --gutter ) * 3) ) / 4);
  /* --grid-min-item-size: 12.5rem; */
  grid-auto-rows: 1fr
}

.grid[data-layout="1/2"] {
  --grid-placement: auto-fit;
  --grid-min-item-size: 20rem;
  --gutter: var(--space-s-m);

  &[data-direction="reversed"] {
    & > :first-child {
      order: 2;
    }
  }
}

[data-gap=m] {
  --gutter: var(--space-m);
}

/* SIDEBAR */
/* .with-sidebar { */
/*   display: flex; */
/*   flex-wrap: wrap; */
/*   gap: var(--s1); */
/* } */

/* .with-sidebar > :first-child { */
/*   flex-grow: 1; */
/* } */

/* .with-sidebar > :last-child { */
/*   flex-basis: 0; */
/*   flex-grow: 999; */
/*   min-inline-size: 50%; */
/* } */

/*
FLOW UTILITY
Like the Every Layout stack: https://every-layout.dev/layouts/stack/
Info about this implementation: https://piccalil.li/quick-tip/flow-utility/
 */
.flow > * + * {
  margin-block-start: var(--space-m, 1em);
}

/**
 * REGION
 * Add consistent vertical padding to create regions of content
 * Can either be configured by setting --region-space or use a default from the space scale
 */
.region {
  padding-block-start: var(--region-space, var(--space-l-xl));
  padding-block-end: var(--region-space, var(--space-l-xl));
}

.region[data-region-space="s"] {
  --region-space: var(--space-s);
}

.region[data-region-space="m"] {
  --region-space: var(--space-m);
}

.region[data-region-space="l"] {
  --region-space: var(--space-l);
}

.region[data-region-space="s-m"] {
  --region-space: var(--space-s-m);
}

.stack {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
}

.stack > * {
  margin-block: 0;
}

.stack > * + * {
  margin-block-start: var(--space, 1em);
}

[data-stack-space=s] {
  --space: var(--space-s);
}

[data-stack-space=m] {
  --space: var(--space-m);
}

[data-stack-space=l] {
  --space: var(--space-l);
}

/* Centering */

.page-max {
  margin-inline: auto;
  max-width: var(--nyc-dimension-page-max-width);
}

.center {
  box-sizing: content-box;
  margin-inline: auto;

  max-inline-size: var(--page-max-width);
  padding-inline-start: var(--gutter);
  padding-inline-end: var(--gutter);
}


/* LAYOUT - Switcher */
.switcher {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-s-m);
  container: switcher / inline-size;
}

.switcher > * {
  flex-grow: 1;
  flex-basis: calc(( 40rem - 100%) * 999);
}

.switcher > :nth-last-child(n+ 4),
.switcher > :nth-last-child(n+ 4) ~ * {
  flex-basis: 100%;
}

[data-col-layout="1-3-2"] {
  & :nth-child(2) {
    order: 3;
  }

  & :nth-child(3) {
    flex-grow: 2;
  }
}

@container switcher (max-width: 40rem) {
  [data-col-layout="1-3-2"] {
    & :nth-child(2) {
      order: initial;
    }
  }
}

/* Layout - Reel */
.reel {
  display: flex;
  block-size: auto;
  overflow-x: auto;
  overflow-y: hidden;
  scrollbar-color: #ccc transparent;
  scroll-behavior: smooth;
  /* border-style: solid; */
  /* border-width: 2px; */

  /* &::after { */
  /*   content: ''; */
  /* flex-basis: 1rem; */
  /* flex-shrink: 0; */
  /* } */
}

.reel > * {
  flex: 0 0 auto;
  display: flex;
  /* margin: 1rem; */
  /* margin-inline-end: 0; */
}


.reel > img {
  block-size: 100%;
  flex-basis: auto;
  width: auto;
}

.reel > * + * {
  margin-inline-start: 1rem;
}

.reel.overflowing {
  padding-block-end: 1rem;
}

.reel::-webkit-scrollbar {
  block-size: 1rem;
}

.reel::-webkit-scrollbar-track {
  background-color: #000;
}

.reel::-webkit-scrollbar-thumb {
  background-color: #ccc;
border-radius: 10px;
  background-image: linear-gradient(tranparent 0, transparent 0.25rem, #ccc 0.25rem, #ccc 0.75rem, transparent 0.75rem);
}

/* Full-bleed right */
.fb-wrapper {
  display: grid;
  grid-template-columns: 1fr min(calc( var( --page-max-width ) + var(--gutter) ), 100%) 1fr;
  padding-inline-start: var(--gutter);
  box-sizing: content-box;
}

.full-bleed {
  width: 100%;
  grid-column: 2 / 4;
}

/* Blocks */


/* BLOCK - Button */
.grid li > .button {
  display: flex;
  height: 100%;
box-sizing: border-box;
}

.button {
  background-color: var(--nyc-cmp-button-background);
  color: var(--nyc-cmp-button-color);
  box-shadow: var(--nyc-cmp-button-shadow);
  padding: 1rem;
  font-size: 1.13rem;
  text-decoration: none;
  font-weight: 700;
  border-radius: 4px;
  display: inline-flex;
  align-items: center;
  justify-content: space-between;
  transition: all 0.3s ease;

  /* & > span:last-child { */
  /*   flex-grow: 1; */
  /* } */

  & > i:last-child {
    flex-shrink: 0;
    margin-inline-start: var(--space-s-l);
    margin-block: auto;
  }

  & > i:first-child {
    /* margin-inline-end: 1rem; */
  }

  &[disabled] {
    color: var(--nyc-cmp-button-color-disabled);
    background: var(--nyc-cmp-button-background-disabled);
  }
}

.button[data-variant="primary"] {
  --nyc-cmp-button-background: var(--nyc-sys-color-primary);
  --nyc-cmp-button-color: var(--nyc-sys-color-on-primary);
  --nyc-cmp-button-shadow: var(--nyc-sys-shadow-primary);

  &:hover {
    --nyc-cmp-button-background: var(--nyc-sys-color-primary-dark);
  }

  &:active,
  &:visited {
    --nyc-cmp-button-background: var(--nyc-sys-color-primary-darker);
  }

  &[disabled] {
    --nyc-cmp-button-background: var(--nyc-sys-color-primary);
    box-shadow: none;
  }
}

.button[data-variant="secondary"] {
  --nyc-cmp-button-background: var(--nyc-sys-color-secondary);
  font-size: 1rem;
}

.button[data-variant="tile"] {
  --nyc-cmp-button-shadow: var(--nyc-sys-shadow-weak);
  /* font-size: var(--size-step-2); */
  --fs: clamp(1.00rem, calc(0.83rem + 0.85vw), 1.38rem);
  font-size: var(--fs);
  flex-wrap: wrap;
  height: 100%;
  align-items: auto;
  min-block-size: 2.5rem;
  --modifier: calc(18rem - 100%);
  /* flex-direction: column; */

  & > * {
    flex-grow: 1;
    flex-basis: calc(var(--modifier) * 999);
  }

  & i {
    font-size: calc(var(--fs) * 1.2);
  }

  & .title {
    --modifier: calc(20rem - 100%);
    flex-basis: 0;
    min-inline-size: 85%;
    /* flex-grow: 999; */
  }

  & > :last-child {
    --modifier: calc(18rem - 100%);
    display: flex;
    justify-content: flex-end;
    align-items: flex-end;
    margin-block-start: 1.5rem;
  }
}

.button[data-variant="outline"],
.button[data-variant="tile"] {
  border: var(--nyc-cmp-button-border);
  box-shadow: var(--nyc-cmp-button-shadow);
  &:hover {
    background: var(--nyc-ref-color-blue-50);
    color: var(--nyc-sys-color-primary);
    border-color: var(--nyc-sys-color-primary);
  }
}

/* TODO: address 900px hard-coded value */
@container grid-parent (max-width: 900px) {
.grid[data-layout="1/4"] {
    /* Bump min-size to ~300px to force 2 col layout */
  /* --grid-min-item-size: 18.75rem; */
  --grid-min-item-size: 18rem;
  }
  .button[data-variant="tile"] {
    /* aspect-ratio: 1 / .8; */
    > :last-child {
      align-items: center;
      margin-block-start: 0;
    }
  }
}

/* BLOCK - Select */

.select {
  position: relative;

  & select {
    padding-inline-end: 3rem;
    width: 100%;
  }

  & i {
    position: absolute;
    pointer-events: none;
    font-size: 2rem;
    inset-inline-end: .75rem;
    height: 100%;
  }
}

/* BLOCK - Header */

.o-header {
  background: url(./img/header-bg.svg) no-repeat center center;
  background-size: cover;
  color: var(--nyc-sys-color-on-primary);

  & :--heading {
    color: var(--nyc-sys-color-on-primary);
  }
}

/* BLOCK - Search */

.search {
  display: flex;
  position: relative;
  width: 100%;
  & input[type="search"] {
    flex-grow: 1;
    transition: padding 0.3s ease;
    &:focus {
      padding-inline-start: 2.25rem;
      & ~ .search__clear-input-button {
        opacity: 1;
        pointer-events: auto;
      }
    }
  }
  & button[type="submit"] {
    background: var(--nyc-sys-color-tertiary);
    color: var(--nyc-sys-color-on-tertiary);
    padding-inline: 1.25rem;
  }
}

.search__clear-input-button {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  background: transparent;
  color: var(--nyc-cmp-input-color);
}

/* Utilities */

.strong {
  font-weight: 700;
}

.background-primary {
  background-color: var(--nyc-sys-color-primary);
  color: var(--nyc-sys-color-on-primary);
}

.background-base {
  background-color: var(--nyc-sys-color-background);
}

.background-neutral {
  background-color: var(--nyc-sys-color-neutral);
  color: var(--nyc-sys-color-on-neutral);
}

.text-xs {
  font-size: var(--size-step--1);
}

.text-md-2 {
  font-size: var(--size-step-05);
}

.text-primary {
  color: var(--nyc-sys-color-primary);
}
